/*! videojs-comscore - v0.1.0 - 2014-03-10
* Copyright (c) 2014 Brandon Aaskov; Licensed  */
!function(a){function b(a){var b,c,d;for(c=1;c<arguments.length;c++){b=arguments[c];for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d])}return a}function c(a){"[object Array]"!==toString.call(a)}function d(a){return 0/0!==parseInt(a,10)}var e={ad:"ad",duration:"duration",index:"index",id:"id",name:"name",publisher:"publisher",show:"show",url:"url"},f=function(){function a(a,b){this.ad(b[e.ad]),this.duration(b[e.duration]),this.index(a),this.id(b[e.id]),this.name(b[e.name]),this.publisher(b[e.publisher]),this.show(b[e.show]),this.url(b[e.url])}return a.name="Clip",a.prototype.ad=function(a){return a&&(this.ns_st_ad=a),this.ns_st_ad},a.prototype.duration=function(a,b){return a&&(this.ns_st_cl=b?1e3*a:a),this.ns_st_cl},a.prototype.index=function(a){return a&&(this.ns_st_cn=a),this.ns_st_cn},a.prototype.id=function(a){return a&&(this.ns_st_ci=a),this.ns_st_ci},a.prototype.name=function(a){return a&&(this.ns_st_ep=a),this.ns_st_ep},a.prototype.publisher=function(a){return a&&(this.ns_st_pu=a),this.ns_st_pu},a.prototype.show=function(a){return a&&(this.ns_st_pr=a),this.ns_st_pr},a.prototype.url=function(a){return a&&(this.ns_st_cu=a),this.ns_st_cu},a}(),g=function(a,g,h){if(0===Array.prototype.slice.call(arguments,0).length)throw new Error("At least two arguments are required to initialize the comScore plugin");if(console.log("id",a),console.log(a+" isNumber()",d(a)),!d(a))throw new Error("The first argument should be your comScore ID");if(c(g))throw new Error("The second argument should be an array (can be empty)");var i={BUFFER:ns_.StreamSense.PlayerEvents.BUFFER,END:ns_.StreamSense.PlayerEvents.END,PLAY:ns_.StreamSense.PlayerEvents.PLAY,PAUSE:ns_.StreamSense.PlayerEvents.PAUSE},j=this,k=new ns_.StreamSense({},"http://b.scorecardresearch.com/p?c1=2&c2="+a),l=null;h&&(e=b({},e,h));var m=function(a){var b=a.map(function(a,b){return new f(b,a)});return b},n=function(){return clips.length>0&&k.setPlaylist(clips),this};j.on("play",function(){k.notify(i.PLAY,{},1e3*j.currentTime())}),j.on("loadeddata",function(){l=clips[0],l.url(j.currentSrc()),k.setClip(l)}),j.on("ended",function(){k.notify(i.END,{},1e3*j.currentTime())}),j.on("paused",function(){k.notify(i.PAUSE,{},1e3*j.currentTime())}),j.comscore={getClips:function(){return n(m(g))}}};a.plugin("comscore",g)}(window.videojs);