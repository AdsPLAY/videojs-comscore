(function(){var t=[].slice;!function(n){var r,i,s,e,o,u,c;return o=function(t){return"[object Array]"===toString.call(t)},u=function(t){return!isNaN(parseInt(t,10))},e=function(t){var n,r,i;for(n=void 0,r=void 0,i=void 0,r=1;r<arguments.length;){n=arguments[r];for(i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);r++}return t},c={ad:"ad",premium:"premium",ugc:"ugc",live:"live",duration:"duration",index:"index",id:"id",name:"name",publisher:"publisher",show:"show",url:"url",classification:"classificaiton"},i={video:{shortform:{premium:"vc11",ugc:"vc21"},longform:{premium:"vc12",ugc:"vc22"},live:{premium:"vc13",ugc:"vc23"},audio:"ac00","default":"vc00"},ad:{preroll:"va11",midroll:"va12",postroll:"va13",live:"va21",audio:"aa00","default":"va00"}},r=function(){function n(t,n){this.ad(n[c.ad]),this.premium(n[c.premium]),this.ugc(n[c.ugc]),this.duration(n[c.duration]),this.index(t),this.id(n[c.id]),this.name(n[c.name]),this.publisher(n[c.publisher]),this.show(n[c.show]),this.url(n[c.url]),this.classification(n[c.classification])}var r,s,e;return s=!1,e=!1,r=!1,n.prototype.ns_st_ad=!1,n.prototype.ns_st_cl=null,n.prototype.ns_st_cn=null,n.prototype.ns_st_ci=null,n.prototype.ns_st_ep=null,n.prototype.ns_st_pu=null,n.prototype.ns_st_pr=null,n.prototype.ns_st_cu=null,n.prototype.ns_st_ct=null,n.prototype.ad=function(){var n,r;return n=1<=arguments.length?t.call(arguments,0):[],r=null!=n?n[0]:void 0,(null!=r?r.toString():void 0)&&(this.ns_st_ad=r),this.ns_st_ad},n.prototype.ugc=function(){var n,r;return n=1<=arguments.length?t.call(arguments,0):[],r=null!=n?n[0]:void 0,(null!=r?r.toString():void 0)&&(e=r),e},n.prototype.premium=function(){var n,r;return n=1<=arguments.length?t.call(arguments,0):[],r=null!=n?n[0]:void 0,(null!=r?r.toString():void 0)&&(s=r),s},n.prototype.live=function(){var n,i;return n=1<=arguments.length?t.call(arguments,0):[],i=null!=n?n[0]:void 0,(null!=i?i.toString():void 0)&&(r=i),r},n.prototype.duration=function(t,n){return n&&(t=1e3*t),t&&(this.ns_st_cl=Math.round(t)),this.ns_st_cl||0},n.prototype.index=function(t){return t&&(this.ns_st_cn=t),this.ns_st_cn},n.prototype.id=function(t){return t&&(this.ns_st_ci=t),this.ns_st_ci},n.prototype.name=function(t){return t&&(this.ns_st_ep=t),this.ns_st_ep},n.prototype.publisher=function(t){return t&&(this.ns_st_pu=t),this.ns_st_pu},n.prototype.show=function(t){return t&&(this.ns_st_pr=t),this.ns_st_pr},n.prototype.url=function(t){return t&&(this.ns_st_cu=t),this.ns_st_cu},n.prototype.classification=function(t){var n;return t&&(this.ns_st_ct=t),n=function(t){return function(){return t.duration()/1e3>=600}}(this),this.ad()?this.ns_st_ct=i.ad.preroll:this.live()?(this.premium()&&(this.ns_st_ct=i.video.live.premium),this.ugc()&&(this.ns_st_ct=i.video.live.ugc)):n()?(this.premium()&&(this.ns_st_ct=i.video.longform.premium),this.ugc()&&(this.ns_st_ct=i.video.longform.ugc)):(this.premium()&&(this.ns_st_ct=i.video.shortform.premium),this.ugc()&&(this.ns_st_ct=i.video.shortform.ugc)),this.ns_st_ct||(this.ns_st_ct=i.video["default"]),this.ns_st_ct},n}(),s=function(t,n,s){var l,a,p,h,_,d,m,f,v,g,y,S,E,w,P,b,A,C,F,U;if(!u(t))throw new Error("The first argument should be your comScore ID");if(!o(n))throw new Error("The second argument should be an array (can be empty)");return d={BUFFER:ns_.StreamSense.PlayerEvents.BUFFER,END:ns_.StreamSense.PlayerEvents.END,PLAY:ns_.StreamSense.PlayerEvents.PLAY,PAUSE:ns_.StreamSense.PlayerEvents.PAUSE},P=this,F=new ns_.StreamSense({},"http://b.scorecardresearch.com/p?c1=2&c2="+t),p=null,a=[],s&&(c=e({},c,s)),h=0,C=!1,A=0,y=function(){return a=S(n),a.length>0?F.setPlaylist(a):void 0},S=function(t){return t.map(function(t,n){return new r(n,t)})},m=function(t){var n,r,i;for(r=0,i=a.length;i>r;r++)if(n=a[r],t===n.url())return n},v=function(){return m(P.currentSrc())},g=function(){return Math.round(1e3*P.currentTime())},f=function(t){return t>=0?a[t]:a},U=function(){return p=v(),p.url(P.currentSrc()),p.duration(P.duration(),!0),console.log("setClip",p),F.setClip(p)},l=function(){return!C&&h===g()&&A++>3?(C=!0,A=0,F.notify(d.BUFFER,{},h),!0):C&&h!==g()?(F.notify(d.PLAY,{},h),C=!1,A=0,!1):!1},w=function(){return F.notify(d.PLAY,{},h)},E=function(){return F.notify(d.PAUSE,{},h)},_=function(){return F.notify(d.END,{},p.duration())},b=function(){return l(),h=g()},P.on("durationchange",function(){return U()}),P.on("play",w),P.on("ended",_),P.on("pause",E),P.on("progress",b),P.comscore={play:w,pause:E,end:_,progress:b,getClips:f,getCurrentClip:v,updateLoadedClip:U,classificationTypes:i},y(),P.comscore},n.plugin("comscore",s)}(window.videojs)}).call(this);